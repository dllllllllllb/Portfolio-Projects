//Author: Maciej Dowbor
//Module: MED5149
//Date last accessed: 20/01/2021

#ifndef SHOP_H
#define SHOP_H

#include <SFML/Audio.hpp>
#include <SFML/System/MemoryInputStream.hpp>

#include "Player.h"
#include "ShopButton.h"
#include "Textures.h"

//=====================================================================================================	
//Class		: Shop
//-----------------------------------------------------------------------------------------------------
//Purpose	: Allow player to buy upgrades
//=====================================================================================================	
class Shop
{
private:
	bool				m_isActive;
	Textures			*m_pTextures;
	sf::RenderWindow	&m_window;
	Player				*m_pPlayer;

	ShopButton			m_health;
	ShopButton			m_shield;
	ShopButton			m_rateOfFire;
	ShopButton			m_speed;
	ShopButton			m_weaponDouble;
	ShopButton			m_weaponTriple;
	ShopButton			m_weaponQuadra;
	Button				m_quit;
	sf::Text			*m_pQuitText;

	bool				m_isLMBPressed;

	sf::Mouse			m_mouse;

	sf::SoundBuffer		m_buffer;
	sf::Sound			m_sound;

public:

	Shop( sf::RenderWindow &window, Textures *textures, Player *player );
	//=================================================================================================						
	//Purpose	: Constructor
	//-------------------------------------------------------------------------------------------------
	//Parameters: Render window reference, texture and player pointer
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================

	~Shop( );
	//=================================================================================================						
	//Purpose	: Destructor
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================

	void update( );
	//=================================================================================================						
	//Purpose	: Updates contents of this class
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================

	void draw( );
	//=================================================================================================						
	//Purpose	: Draws contents of this class
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================

	void setUpButtons( );
	//=================================================================================================						
	//Purpose	: Sets up buttons
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================

	void mouseControl( );
	//=================================================================================================						
	//Purpose	: Checks for player mouse controls
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================

	bool checkForCredits( const int &price, const int &playerCredits );
	//=================================================================================================						
	//Purpose	: Checks if player has enough credits to buy an upgrade
	//-------------------------------------------------------------------------------------------------
	//Parameters: Price of the item, player credits
	//-------------------------------------------------------------------------------------------------
	//Returns	: If player has enough credits to purchase this upgrade
	//=================================================================================================

	bool getAcviteState( );
	//=================================================================================================						
	//Purpose	: Returns shop state
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: Shop active state
	//=================================================================================================

	void toggleActiveState( );
	//=================================================================================================						
	//Purpose	: Toggles active state
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================

	void playSound( );
	//=================================================================================================						
	//Purpose	: Plays purchase sound
	//-------------------------------------------------------------------------------------------------
	//Parameters: -
	//-------------------------------------------------------------------------------------------------
	//Returns	: -
	//=================================================================================================
};

#endif // !SHOP_H
